
# 5장 소프트웨어에서 표현되는 모델

MODEL - DRIVEN DESIGN 의 효과를 놓칮지 않으면서 구현과 조화를 이루려면 기본적인 사항을 재구성할 필요가 있다. <strong> 모델과 구현은 상세 수준에서 연결돼야 한다. </strong>
여기서는 상세한 구현 결정이 MODEL - DRIVEN DESIGN 을 실현하는데 얼머나 중요한가를 연관관계를 토대로 알게 될 것이다.

앞으로 소개할 맥락에 맞게 그러한 개념을 구성한다면 세부구성요소를 만드는 데 도움이 될 것 이다.

## 연관관계

+ 애플리케이션 요구사항에 두 방향을 모두 탐색해야 한다는 요건이 없다면 가능한 한 관계를 제약하는 것이 중요하며, 탐색 방향을 추가하면 상호의존성이 주어들고 설계가 유연해진다.
  <small> ( 도메인을 이해하면 도메인 본연의 방향성이 드러날지도 모른다. )</small>
  

+ 도메인의 특성이 반영되게끔 연관관계를 일관되게 제약한다면 연관관계의 의사전달력이 풍부해지고 구현이 단순해지며, 나머지 양방향 연관관계도 의미를 지니게 된다.


## ENTITY (참조객체)

연속성과 식별성을 지닌 객체를 뜻한다.

+ <strong> ENTITY 의 근본적인 개념은 객체의 생명주기 내내 이어지는 추상적인 연속성이며, 그러한 추상적인 연속성은 여러 형태를 거쳐 전달된다. </strong>
+ 클래스 정의와 책임, 속성, 연관관계는 ENTITY 에 포함된 특정 속성보다는 ENTITY 의 정체성에 초점을 맞춰햔다.
+ 경계(바운디드 컨텍스트) 에 따라 해당 모델은 ENTITY 일수도, 아닐수도 있다.

### ENTITY 모델링

+ 객체가 속성보다 식별성으로 구분될 경우 모델 내에서 이를 해당 객체의 주된 정의로 삼는다.
+ 클래스 정의를 단순하게 하고 생명주기의 연속성과 식별성에 집중한다.
+ 객체의 형태나 이력에 관계없이 각 객체를 구별하는 수단을 정의한다.
+ 객체의 속성으로 객체의 일치 여부를 판단하는 요구사항에 주의한다.
+ 유일한 결과를 반환하는 연산을 정의한다.

## VALUE OBJECT

연속성과 상태를 기술하는 속성을 가진 객체이며 사물의 어떤 특징을 묘사한다.

+ 모델에 포함된 어떤 요소의 속성에만 관심이 있다면 그것을 VALUE OBJECT 로 분류한다.
+ 개념적 완전성을 가진 VALUE OBJECT 를 생성하고 기능을 부여하라
+ 가능한 불변으로 다뤄라  
+ ENTITY 안에 포함될 수 있으며, VALUE OBJECT 안에 ENTITY 가 포함될 수 있다.
+ 엔티티와 마찬가지로 경계(바운디드 컨텍스트) 에 따라 해당 모델은 VALUE OBJECT 일수도, 아닐수도 있다.


## SERVICE

클라이언트 요청에 대해 수행되는 뭔가를 의미한다. SERVICE 는 도메인에도 나타나는데, 소프트웨어에서 수행해야 하는 것에는 해당하지만 상태를 주고받지는 않는 활동을 모델링 하는 경우가 여기에 해당한다.

필요한 도메인 기능을 ENTITY 나 VALUE 에서 억지로 맡겨 모델에 기반을 둔 객체의 정의가 왜곡되거나, 또는 무의미하고 인위적으로 만들어진 객체를 방지하기 위해 SERVICE 를 사용한다.

+ 도메인의 중대한 프로세스나 변환 과정이 ENTITY 나 VALUE OBJECT 의 고유한 책임이 아니라면 연산을 SERVICE 로 선언되는 독립 인터페이스로 모델에 추가하라.
+ 유비쿼터스 랭귀지의 일부가 되게끔 구성하라
+ 상태를 갖지 않게 만들어라.
+ SERVICE 매개변수의 결과는 도메인 객체여야 한다.


### 도메인 SERVICE

ex) 자금 이체 도메인 서비스
+ 금액 인출/입금에 필요한 계좌와 원장객체 간의 상호작용
+ 이체 결과 확인 정보 제공

### 인프라스트럭쳐 SERVICE
ex) 통지 서비스
+ 애플리케이션에서 지정한 곳으로 이메일이나 우편 등을 보냄

### 응용 SERVICE
ex) 자금 이체 응용 서비스
+ 입력내용의 암호화
+ 이체 처리를 위한 도메인 서비스로의 메시지 전송
+ 이체 확인 대기
+ <strong> 인프라스트럭처 서비스를 이용한 통지 결정 </strong>


## MODULE
MODEL - DRIVEN DESIGN 에서 MODULE 또한 모델의 한 부분이므로 도메인의 개념을 반영해야 한다. 모듈은 항상 어떤 것에 의존하지만, 의존성은 최소한으로 유지해야 한다. (느슨한 결합, 높은 응집)

+ 독립적이고 상호 교환 가능해야 한다,
+ 원하는 기능을 제공하는 데 필요한 모든 것을 갖추고 있어야 한다.
+ 정의된 인터페이스가 있어야 한다.
+ 모듈은 모델과 함께 발전해야 한다.

인프라스트럭처 주도 패키지화 함정




